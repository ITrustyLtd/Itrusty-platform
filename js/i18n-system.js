// üåê I Trusty Ltd - Bilingual System (English/‰∏≠Êñá)
// Complete translation system for all pages

class I18nSystem {
    constructor() {
        this.currentLanguage = localStorage.getItem('language') || 'en';
        this.translations = {
            en: {
                // Navigation
                navigation: {
                    dashboard: 'Dashboard',
                    appTitle: 'I Trusty Project Timeline Manager',
                    appSubtitle: 'Calendar-Based Execution Planning & Staff Assignment',
                    theme: 'Theme',
                    projects: 'Projects',
                    orders: 'Orders',
                    dailyActivities: 'Daily Activities',
                    ordersWorkflow: 'Orders & Workflow',
                    team: 'Team',
                    messages: 'Messages',
                    suppliers: 'Suppliers',
                    finance: 'Finance',
                    ordersSystem: 'Orders System',
                    balanceSummary: 'Balance Summary',
                    customerInvoices: 'Customer Invoices',
                    supplierPayments: 'Supplier Payments',
                    profitAnalysis: 'Profit Analysis',
                    companyExpenses: 'Company Expenses',
                    customers: 'Customers',
                    salesCommissions: 'Sales Commissions',
                    newProject: 'New Project',
                    newTask: 'New Task',
                    listView: 'List View',
                    staff: 'Staff',
                    balance: 'Balance',
                    backToCalendar: 'Back to Calendar'
                },
                
                // Common terms
                common: {
                    dashboard: 'Dashboard',
                    logout: 'Logout',
                    settings: 'Settings',
                    help: 'Help',
                    search: 'Search',
                    filter: 'Filter',
                    export: 'Export',
                    import: 'Import',
                    save: 'Save',
                    cancel: 'Cancel',
                    delete: 'Delete',
                    edit: 'Edit',
                    view: 'View',
                    add: 'Add',
                    close: 'Close',
                    submit: 'Submit',
                    refresh: 'Refresh',
                    loading: 'Loading...',
                    noData: 'No data available',
                    error: 'Error',
                    success: 'Success',
                    warning: 'Warning',
                    info: 'Information',
                    confirm: 'Confirm',
                    send: 'Send',
                    today: 'Today',
                    priority: 'Priority',
                    priorityLow: 'Low',
                    priorityMedium: 'Medium',
                    priorityHigh: 'High',
                    priorityCritical: 'Critical',
                    description: 'Description',
                    startDate: 'Start Date',
                    dueDate: 'Due Date',
                    estimatedHours: 'Estimated Hours'
                },
                
                // Dashboard
                dashboard: {
                    activeProjects: 'Active Projects',
                    pendingTasks: 'Pending Tasks',
                    staffUtilization: 'Staff Utilization',
                    overdueItems: 'Overdue Items',
                    staffWorkload: 'Staff Workload',
                    tasksProjectsList: 'Tasks & Projects List'
                },
                
                // Projects
                projects: {
                    createNew: 'Create New Project',
                    title: 'Project Title',
                    clientName: 'Client Name',
                    manager: 'Project Manager',
                    budget: 'Budget (RMB)',
                    createButton: 'Create Project'
                },
                
                // Tasks
                tasks: {
                    createNew: 'Create New Task',
                    title: 'Task Title',
                    project: 'Project',
                    assignedTo: 'Assigned To',
                    createButton: 'Create Task'
                },
                
                // Staff
                staff: {
                    title: 'Staff Productivity & Cost Analysis',
                    allOffices: 'All Offices',
                    performanceSummary: 'Team Performance Summary',
                    totalStaff: 'Total Staff',
                    totalHours: 'Total Hours Logged',
                    totalCost: 'Total Cost',
                    avgProductivity: 'Avg Productivity',
                    productivityComparison: 'Staff Productivity Comparison',
                    staffDetails: 'Staff Details'
                },
                
                // Orders
                orders: {
                    title: 'Orders Management',
                    newOrder: 'New Order'
                },
                
                // Daily Activities
                dailyActivities: {
                    title: 'Daily Activities Tracking',
                    allStaff: 'All Staff',
                    allActivities: 'All Activities',
                    timelineView: 'Timeline View',
                    listView: 'List View',
                    dailySummary: 'Daily Summary',
                    staffAnalytics: 'Staff Analytics',
                    activities: 'Activities',
                    hoursLogged: 'Hours Logged',
                    activeStaff: 'Active Staff',
                    completed: 'Completed',
                    dailyTimelineView: 'Daily Timeline View',
                    timelineDescription: 'Horizontal timeline showing all staff activities for the selected day',
                    activityTypes: {
                        assignedTask: 'Assigned Task',
                        clientCommunication: 'Client Communication',
                        sourcing: 'Sourcing',
                        qualityControl: 'Quality Control',
                        administrative: 'Administrative',
                        meeting: 'Meeting',
                        travel: 'Travel',
                        research: 'Research',
                        other: 'Other'
                    }
                },
                
                // Messaging System
                messaging: {
                    title: 'Team Messaging',
                    newMessage: 'New Message',
                    compose: 'Compose Message',
                    inbox: 'Inbox',
                    sent: 'Sent',
                    drafts: 'Drafts',
                    allMessages: 'All Messages',
                    unread: 'Unread',
                    recipients: 'Recipients',
                    selectRecipients: 'Select Recipients',
                    selectMultiple: '(Select multiple)',
                    selected: 'Selected',
                    messageType: 'Message Type',
                    priority: 'Priority',
                    category: 'Category',
                    subject: 'Subject',
                    message: 'Message',
                    relatedOrder: 'Related Order (Optional)',
                    relatedCustomer: 'Related Customer (Optional)',
                    attachFile: 'Attach File',
                    useTemplate: 'Use Template',
                    saveDraft: 'Save Draft',
                    sendMessage: 'Send Message',
                    staffDirectory: 'Staff Directory',
                    broadcast: 'Broadcast Message',
                    messageTemplates: 'Message Templates',
                    quickActions: 'Quick Actions',
                    notifications: 'Notifications',
                    markAllRead: 'Mark all read',
                    participants: 'Participants',
                    recentNotifications: 'Recent Notifications',
                    typeYourMessage: 'Type your message...',
                    searchStaff: 'Search staff by name or office...',
                    offices: {
                        all: 'All Offices',
                        yiwu: 'Yiwu Office',
                        shenzhen: 'Shenzhen Office',
                        greece: 'Greece Office'
                    },
                    types: {
                        internal: 'Internal Only',
                        email: 'Email Notification',
                        wechat: 'WeChat Notification'
                    },
                    priorities: {
                        low: 'Low',
                        normal: 'Normal',
                        high: 'High',
                        urgent: 'Urgent'
                    },
                    categories: {
                        general: 'General',
                        order: 'Order Related',
                        customer: 'Customer Related',
                        urgent: 'Urgent',
                        announcement: 'Announcement'
                    },
                    validation: {
                        selectRecipient: 'Please select at least one recipient!',
                        enterSubject: 'Please enter a subject!',
                        enterMessage: 'Please enter a message!',
                        messageSent: 'Message sent successfully!',
                        messageFailed: 'Failed to send message'
                    },
                    noMessages: 'No messages',
                    noNotifications: 'No notifications',
                    selectConversation: 'Select a conversation to view messages',
                    viewMessage: 'View Message',
                    allFeatures: 'View All Features'
                },
                
                // Daily Activities
                activities: {
                    title: 'Daily Activities Tracking',
                    allStaff: 'All Staff',
                    allActivities: 'All Activities',
                    timelineView: 'Timeline View',
                    listView: 'List View',
                    dailySummary: 'Daily Summary',
                    staffAnalytics: 'Staff Analytics',
                    logActivity: 'Log Activity',
                    staffMember: 'Staff Member',
                    startTime: 'Start Time',
                    endTime: 'End Time',
                    activityType: 'Activity Type',
                    activityTitle: 'Activity Title',
                    details: 'Details',
                    outcome: 'Outcome',
                    clientName: 'Client (if any)',
                    location: 'Location',
                    saveActivity: 'Save Activity',
                    todayPerformance: 'Today\'s Performance',
                    recentActivities: 'Recent Activities',
                    totalActivities: 'Activities',
                    hoursLogged: 'Hours Logged',
                    activeStaff: 'Active Staff',
                    completedTasks: 'Completed',
                    types: {
                        assignedTask: 'Assigned Task',
                        clientCommunication: 'Client Communication',
                        sourcing: 'Sourcing',
                        qualityControl: 'Quality Control',
                        administrative: 'Administrative',
                        meeting: 'Meeting',
                        travel: 'Travel',
                        research: 'Research',
                        other: 'Other'
                    },
                    outcomes: {
                        completed: 'Completed',
                        inProgress: 'In Progress',
                        blocked: 'Blocked',
                        needsFollowup: 'Needs Follow-up'
                    },
                    locations: {
                        office: 'Office',
                        clientSite: 'Client Site',
                        supplierLocation: 'Supplier Location',
                        remote: 'Remote',
                        travel: 'Travel'
                    },
                    noActivitiesLogged: 'No activities logged for this day'
                },
                
                // Staff & Team
                staff: {
                    title: 'Staff Management',
                    staffCosts: 'Staff Productivity & Cost Analysis',
                    teamPerformance: 'Team Performance Summary',
                    totalStaff: 'Total Staff',
                    totalHours: 'Total Hours Logged',
                    totalCost: 'Total Cost',
                    avgProductivity: 'Avg Productivity',
                    productivity: 'Productivity',
                    tasks: 'Tasks',
                    productiveHours: 'Prod. Hours',
                    adminHours: 'Admin Hours',
                    cost: 'Cost',
                    revenue: 'Revenue',
                    recentTasks: 'Recent Tasks',
                    viewAllTasks: 'View All',
                    messageStaff: 'Message',
                    noTasksLogged: 'No tasks logged this month',
                    role: 'Role',
                    office: 'Office',
                    email: 'Email',
                    phone: 'Phone',
                    wechatId: 'WeChat ID',
                    sendMessage: 'Send Message'
                },
                
                // Finance
                finance: {
                    title: 'Finance',
                    financialAccounts: 'Financial Accounts',
                    recordPayment: 'Record Payment',
                    transactions: 'Transactions',
                    customers: 'Customer Invoices',
                    suppliers: 'Supplier Payments',
                    balance: 'Balance',
                    income: 'Income',
                    expenses: 'Expenses',
                    profit: 'Profit',
                    currency: 'Currency',
                    amount: 'Amount',
                    date: 'Date',
                    description: 'Description',
                    account: 'Account',
                    status: 'Status',
                    paid: 'Paid',
                    pending: 'Pending',
                    overdue: 'Overdue',
                    paymentHistory: 'Payment History',
                    accountLedger: 'Account Ledger',
                    totalBalance: 'Total Balance',
                    bankAccounts: 'Bank Accounts',
                    officeFinancials: 'Office Financials',
                    companyCosts: 'Company Expenses',
                    staffCosts: 'Staff Costs',
                    salesCommissions: 'Sales Commissions'
                },
                
                // Orders
                orders: {
                    title: 'Orders Management',
                    allOrders: 'All Orders',
                    activeOrders: 'Active Orders',
                    completedOrders: 'Completed Orders',
                    pendingOrders: 'Pending Orders',
                    orderNumber: 'Order Number',
                    customer: 'Customer',
                    supplier: 'Supplier',
                    product: 'Product',
                    quantity: 'Quantity',
                    price: 'Price',
                    totalAmount: 'Total Amount',
                    orderDate: 'Order Date',
                    deliveryDate: 'Delivery Date',
                    orderStatus: 'Order Status',
                    paymentStatus: 'Payment Status',
                    shippingStatus: 'Shipping Status',
                    trackingNumber: 'Tracking Number',
                    notes: 'Notes',
                    addOrder: 'Add Order',
                    editOrder: 'Edit Order',
                    viewOrder: 'View Order',
                    workflow: 'Workflow',
                    step: 'Step'
                },
                
                // Projects
                projects: {
                    title: 'Projects',
                    allProjects: 'All Projects',
                    activeProjects: 'Active Projects',
                    completedProjects: 'Completed Projects',
                    projectName: 'Project Name',
                    projectManager: 'Project Manager',
                    startDate: 'Start Date',
                    endDate: 'End Date',
                    deadline: 'Deadline',
                    progress: 'Progress',
                    budget: 'Budget',
                    team: 'Team',
                    addProject: 'Add Project',
                    editProject: 'Edit Project',
                    viewProject: 'View Project'
                },
                
                // Common Forms
                form: {
                    required: 'Required',
                    optional: 'Optional',
                    selectOption: 'Select an option',
                    enterValue: 'Enter value',
                    chooseDate: 'Choose date',
                    chooseFile: 'Choose file',
                    uploadFile: 'Upload file',
                    dragDrop: 'Drag and drop or click to upload',
                    invalidInput: 'Invalid input',
                    fieldRequired: 'This field is required',
                    saveChanges: 'Save Changes',
                    discardChanges: 'Discard Changes',
                    confirmDelete: 'Are you sure you want to delete this?',
                    confirmAction: 'Are you sure you want to proceed?'
                },
                
                // Time & Dates
                time: {
                    today: 'Today',
                    yesterday: 'Yesterday',
                    tomorrow: 'Tomorrow',
                    thisWeek: 'This Week',
                    thisMonth: 'This Month',
                    lastMonth: 'Last Month',
                    selectDate: 'Select Date',
                    justNow: 'Just now',
                    minutesAgo: 'minutes ago',
                    hoursAgo: 'hours ago',
                    daysAgo: 'days ago',
                    weeksAgo: 'weeks ago',
                    monthsAgo: 'months ago'
                }
            },
            
            zh: {
                // ÂØºËà™
                navigation: {
                    dashboard: 'ÊéßÂà∂Èù¢Êùø',
                    appTitle: 'I Trusty È°πÁõÆÊó∂Èó¥ÁÆ°ÁêÜÁ≥ªÁªü',
                    appSubtitle: 'Âü∫‰∫éÊó•ÂéÜÁöÑÊâßË°åËßÑÂàíÂíåÂëòÂ∑•ÂàÜÈÖç',
                    theme: '‰∏ªÈ¢ò',
                    projects: 'È°πÁõÆ',
                    orders: 'ËÆ¢Âçï',
                    dailyActivities: 'Êó•Â∏∏Ê¥ªÂä®',
                    ordersWorkflow: 'ËÆ¢Âçï‰∏éÂ∑•‰ΩúÊµÅ',
                    team: 'Âõ¢Èòü',
                    messages: 'Ê∂àÊÅØ',
                    suppliers: '‰æõÂ∫îÂïÜ',
                    finance: 'Ë¥¢Âä°',
                    ordersSystem: 'ËÆ¢ÂçïÁ≥ªÁªü',
                    balanceSummary: '‰ΩôÈ¢ùÊ±áÊÄª',
                    customerInvoices: 'ÂÆ¢Êà∑ÂèëÁ•®',
                    supplierPayments: '‰æõÂ∫îÂïÜ‰ªòÊ¨æ',
                    profitAnalysis: 'Âà©Ê∂¶ÂàÜÊûê',
                    companyExpenses: 'ÂÖ¨Âè∏ÊîØÂá∫',
                    customers: 'ÂÆ¢Êà∑',
                    salesCommissions: 'ÈîÄÂîÆ‰Ω£Èáë',
                    newProject: 'Êñ∞Âª∫È°πÁõÆ',
                    newTask: 'Êñ∞Âª∫‰ªªÂä°',
                    listView: 'ÂàóË°®ËßÜÂõæ',
                    staff: 'ÂëòÂ∑•',
                    balance: '‰ΩôÈ¢ù',
                    backToCalendar: 'ËøîÂõûÊó•ÂéÜ'
                },
                
                // ÈÄöÁî®ÊúØËØ≠
                common: {
                    dashboard: 'ÊéßÂà∂Èù¢Êùø',
                    logout: 'ÈÄÄÂá∫',
                    settings: 'ËÆæÁΩÆ',
                    help: 'Â∏ÆÂä©',
                    search: 'ÊêúÁ¥¢',
                    filter: 'Á≠õÈÄâ',
                    export: 'ÂØºÂá∫',
                    import: 'ÂØºÂÖ•',
                    save: '‰øùÂ≠ò',
                    cancel: 'ÂèñÊ∂à',
                    delete: 'Âà†Èô§',
                    edit: 'ÁºñËæë',
                    view: 'Êü•Áúã',
                    add: 'Ê∑ªÂä†',
                    close: 'ÂÖ≥Èó≠',
                    submit: 'Êèê‰∫§',
                    refresh: 'Âà∑Êñ∞',
                    loading: 'Âä†ËΩΩ‰∏≠...',
                    noData: 'ÊöÇÊó†Êï∞ÊçÆ',
                    error: 'ÈîôËØØ',
                    success: 'ÊàêÂäü',
                    warning: 'Ë≠¶Âëä',
                    info: '‰ø°ÊÅØ',
                    confirm: 'Á°ÆËÆ§',
                    send: 'ÂèëÈÄÅ',
                    today: '‰ªäÂ§©',
                    priority: '‰ºòÂÖàÁ∫ß',
                    priorityLow: '‰Ωé',
                    priorityMedium: '‰∏≠',
                    priorityHigh: 'È´ò',
                    priorityCritical: 'Á¥ßÊÄ•',
                    description: 'ÊèèËø∞',
                    startDate: 'ÂºÄÂßãÊó•Êúü',
                    dueDate: 'Êà™Ê≠¢Êó•Êúü',
                    estimatedHours: 'È¢ÑËÆ°Â∑•Êó∂'
                },
                
                // ÊéßÂà∂Èù¢Êùø
                dashboard: {
                    activeProjects: 'Ê¥ªÂä®È°πÁõÆ',
                    pendingTasks: 'ÂæÖÂ§ÑÁêÜ‰ªªÂä°',
                    staffUtilization: 'ÂëòÂ∑•Âà©Áî®Áéá',
                    overdueItems: 'ÈÄæÊúüÈ°πÁõÆ',
                    staffWorkload: 'ÂëòÂ∑•Â∑•‰ΩúÈáè',
                    tasksProjectsList: '‰ªªÂä°ÂíåÈ°πÁõÆÂàóË°®'
                },
                
                // È°πÁõÆ
                projects: {
                    createNew: 'ÂàõÂª∫Êñ∞È°πÁõÆ',
                    title: 'È°πÁõÆÊ†áÈ¢ò',
                    clientName: 'ÂÆ¢Êà∑ÂêçÁß∞',
                    manager: 'È°πÁõÆÁªèÁêÜ',
                    budget: 'È¢ÑÁÆóÔºà‰∫∫Ê∞ëÂ∏ÅÔºâ',
                    createButton: 'ÂàõÂª∫È°πÁõÆ'
                },
                
                // ‰ªªÂä°
                tasks: {
                    createNew: 'ÂàõÂª∫Êñ∞‰ªªÂä°',
                    title: '‰ªªÂä°Ê†áÈ¢ò',
                    project: 'È°πÁõÆ',
                    assignedTo: 'ÂàÜÈÖçÁªô',
                    createButton: 'ÂàõÂª∫‰ªªÂä°'
                },
                
                // ÂëòÂ∑•
                staff: {
                    title: 'ÂëòÂ∑•Áîü‰∫ßÂäõÂíåÊàêÊú¨ÂàÜÊûê',
                    allOffices: 'ÊâÄÊúâÂäûÂÖ¨ÂÆ§',
                    performanceSummary: 'Âõ¢ÈòüÁª©ÊïàÊÄªÁªì',
                    totalStaff: 'ÂëòÂ∑•ÊÄªÊï∞',
                    totalHours: 'ÊÄªËÆ∞ÂΩïÂ∑•Êó∂',
                    totalCost: 'ÊÄªÊàêÊú¨',
                    avgProductivity: 'Âπ≥ÂùáÁîü‰∫ßÂäõ',
                    productivityComparison: 'ÂëòÂ∑•Áîü‰∫ßÂäõÂØπÊØî',
                    staffDetails: 'ÂëòÂ∑•ËØ¶ÊÉÖ'
                },
                
                // ËÆ¢Âçï
                orders: {
                    title: 'ËÆ¢ÂçïÁÆ°ÁêÜ',
                    newOrder: 'Êñ∞ËÆ¢Âçï'
                },
                
                // Êó•Â∏∏Ê¥ªÂä®
                dailyActivities: {
                    title: 'Êó•Â∏∏Ê¥ªÂä®Ë∑üË∏™',
                    allStaff: 'ÊâÄÊúâÂëòÂ∑•',
                    allActivities: 'ÊâÄÊúâÊ¥ªÂä®',
                    timelineView: 'Êó∂Èó¥Á∫øËßÜÂõæ',
                    listView: 'ÂàóË°®ËßÜÂõæ',
                    dailySummary: 'ÊØèÊó•ÊÄªÁªì',
                    staffAnalytics: 'ÂëòÂ∑•ÂàÜÊûê',
                    activities: 'Ê¥ªÂä®',
                    hoursLogged: 'ËÆ∞ÂΩïÂ∑•Êó∂',
                    activeStaff: 'Ê¥ªË∑ÉÂëòÂ∑•',
                    completed: 'Â∑≤ÂÆåÊàê',
                    dailyTimelineView: 'ÊØèÊó•Êó∂Èó¥Á∫øËßÜÂõæ',
                    timelineDescription: 'ÊòæÁ§∫ÊâÄÈÄâÊó•ÊúüÊâÄÊúâÂëòÂ∑•Ê¥ªÂä®ÁöÑÊ®™ÂêëÊó∂Èó¥Á∫ø',
                    activityTypes: {
                        assignedTask: 'ÊåáÂÆö‰ªªÂä°',
                        clientCommunication: 'ÂÆ¢Êà∑Ê≤üÈÄö',
                        sourcing: 'ÈááË¥≠',
                        qualityControl: 'Ë¥®ÈáèÊéßÂà∂',
                        administrative: 'Ë°åÊîøÂ∑•‰Ωú',
                        meeting: '‰ºöËÆÆ',
                        travel: 'Âá∫Â∑Æ',
                        research: 'Á†îÁ©∂',
                        other: 'ÂÖ∂‰ªñ'
                    }
                },
                
                // Ê∂àÊÅØÁ≥ªÁªü
                messaging: {
                    title: 'Âõ¢ÈòüÊ∂àÊÅØ',
                    newMessage: 'Êñ∞Ê∂àÊÅØ',
                    compose: 'Êí∞ÂÜôÊ∂àÊÅØ',
                    inbox: 'Êî∂‰ª∂ÁÆ±',
                    sent: 'Â∑≤ÂèëÈÄÅ',
                    drafts: 'ËçâÁ®øÁÆ±',
                    allMessages: 'ÂÖ®ÈÉ®Ê∂àÊÅØ',
                    unread: 'Êú™ËØª',
                    recipients: 'Êî∂‰ª∂‰∫∫',
                    selectRecipients: 'ÈÄâÊã©Êî∂‰ª∂‰∫∫',
                    selectMultiple: '(ÂèØÂ§öÈÄâ)',
                    selected: 'Â∑≤ÈÄâÊã©',
                    messageType: 'Ê∂àÊÅØÁ±ªÂûã',
                    priority: '‰ºòÂÖàÁ∫ß',
                    category: 'Á±ªÂà´',
                    subject: '‰∏ªÈ¢ò',
                    message: 'Ê∂àÊÅØÂÜÖÂÆπ',
                    relatedOrder: 'Áõ∏ÂÖ≥ËÆ¢ÂçïÔºàÂèØÈÄâÔºâ',
                    relatedCustomer: 'Áõ∏ÂÖ≥ÂÆ¢Êà∑ÔºàÂèØÈÄâÔºâ',
                    attachFile: 'ÈôÑÂä†Êñá‰ª∂',
                    useTemplate: '‰ΩøÁî®Ê®°Êùø',
                    saveDraft: '‰øùÂ≠òËçâÁ®ø',
                    sendMessage: 'ÂèëÈÄÅÊ∂àÊÅØ',
                    staffDirectory: 'ÂëòÂ∑•ÈÄöËÆØÂΩï',
                    broadcast: 'Áæ§ÂèëÊ∂àÊÅØ',
                    messageTemplates: 'Ê∂àÊÅØÊ®°Êùø',
                    quickActions: 'Âø´ÈÄüÊìç‰Ωú',
                    notifications: 'ÈÄöÁü•',
                    markAllRead: 'ÂÖ®ÈÉ®Ê†áËÆ∞‰∏∫Â∑≤ËØª',
                    participants: 'ÂèÇ‰∏éËÄÖ',
                    recentNotifications: 'ÊúÄËøëÈÄöÁü•',
                    typeYourMessage: 'ËæìÂÖ•ÊÇ®ÁöÑÊ∂àÊÅØ...',
                    searchStaff: 'ÊåâÂßìÂêçÊàñÂäûÂÖ¨ÂÆ§ÊêúÁ¥¢ÂëòÂ∑•...',
                    offices: {
                        all: 'ÊâÄÊúâÂäûÂÖ¨ÂÆ§',
                        yiwu: '‰πâ‰πåÂäûÂÖ¨ÂÆ§',
                        shenzhen: 'Ê∑±Âú≥ÂäûÂÖ¨ÂÆ§',
                        greece: 'Â∏åËÖäÂäûÂÖ¨ÂÆ§'
                    },
                    types: {
                        internal: '‰ªÖÂÜÖÈÉ®',
                        email: 'ÈÇÆ‰ª∂ÈÄöÁü•',
                        wechat: 'ÂæÆ‰ø°ÈÄöÁü•'
                    },
                    priorities: {
                        low: '‰Ωé',
                        normal: 'ÊôÆÈÄö',
                        high: 'È´ò',
                        urgent: 'Á¥ßÊÄ•'
                    },
                    categories: {
                        general: '‰∏ÄËà¨',
                        order: 'ËÆ¢ÂçïÁõ∏ÂÖ≥',
                        customer: 'ÂÆ¢Êà∑Áõ∏ÂÖ≥',
                        urgent: 'Á¥ßÊÄ•',
                        announcement: 'ÂÖ¨Âëä'
                    },
                    validation: {
                        selectRecipient: 'ËØ∑Ëá≥Â∞ëÈÄâÊã©‰∏Ä‰ΩçÊî∂‰ª∂‰∫∫ÔºÅ',
                        enterSubject: 'ËØ∑ËæìÂÖ•‰∏ªÈ¢òÔºÅ',
                        enterMessage: 'ËØ∑ËæìÂÖ•Ê∂àÊÅØÂÜÖÂÆπÔºÅ',
                        messageSent: 'Ê∂àÊÅØÂèëÈÄÅÊàêÂäüÔºÅ',
                        messageFailed: 'Ê∂àÊÅØÂèëÈÄÅÂ§±Ë¥•'
                    },
                    noMessages: 'ÊöÇÊó†Ê∂àÊÅØ',
                    noNotifications: 'ÊöÇÊó†ÈÄöÁü•',
                    selectConversation: 'ÈÄâÊã©ÂØπËØù‰ª•Êü•ÁúãÊ∂àÊÅØ',
                    viewMessage: 'Êü•ÁúãÊ∂àÊÅØ',
                    allFeatures: 'Êü•ÁúãÊâÄÊúâÂäüËÉΩ'
                },
                
                // Êó•Â∏∏Ê¥ªÂä®
                activities: {
                    title: 'Êó•Â∏∏Ê¥ªÂä®Ë∑üË∏™',
                    allStaff: 'ÂÖ®ÈÉ®ÂëòÂ∑•',
                    allActivities: 'ÂÖ®ÈÉ®Ê¥ªÂä®',
                    timelineView: 'Êó∂Èó¥Á∫øËßÜÂõæ',
                    listView: 'ÂàóË°®ËßÜÂõæ',
                    dailySummary: 'ÊØèÊó•ÊëòË¶Å',
                    staffAnalytics: 'ÂëòÂ∑•ÂàÜÊûê',
                    logActivity: 'ËÆ∞ÂΩïÊ¥ªÂä®',
                    staffMember: 'ÂëòÂ∑•',
                    startTime: 'ÂºÄÂßãÊó∂Èó¥',
                    endTime: 'ÁªìÊùüÊó∂Èó¥',
                    activityType: 'Ê¥ªÂä®Á±ªÂûã',
                    activityTitle: 'Ê¥ªÂä®Ê†áÈ¢ò',
                    details: 'ËØ¶ÊÉÖ',
                    outcome: 'ÁªìÊûú',
                    clientName: 'ÂÆ¢Êà∑ÔºàÂ¶ÇÊúâÔºâ',
                    location: 'Âú∞ÁÇπ',
                    saveActivity: '‰øùÂ≠òÊ¥ªÂä®',
                    todayPerformance: '‰ªäÊó•Ë°®Áé∞',
                    recentActivities: 'ÊúÄËøëÊ¥ªÂä®',
                    totalActivities: 'Ê¥ªÂä®Êï∞',
                    hoursLogged: 'ËÆ∞ÂΩïÂ∞èÊó∂Êï∞',
                    activeStaff: 'Ê¥ªË∑ÉÂëòÂ∑•',
                    completedTasks: 'Â∑≤ÂÆåÊàê',
                    types: {
                        assignedTask: 'ÂàÜÈÖç‰ªªÂä°',
                        clientCommunication: 'ÂÆ¢Êà∑Ê≤üÈÄö',
                        sourcing: 'ÈááË¥≠',
                        qualityControl: 'Ë¥®ÈáèÊéßÂà∂',
                        administrative: 'Ë°åÊîø‰∫ãÂä°',
                        meeting: '‰ºöËÆÆ',
                        travel: 'Âá∫Â∑Æ',
                        research: 'Á†îÁ©∂',
                        other: 'ÂÖ∂‰ªñ'
                    },
                    outcomes: {
                        completed: 'Â∑≤ÂÆåÊàê',
                        inProgress: 'ËøõË°å‰∏≠',
                        blocked: 'ÂèóÈòª',
                        needsFollowup: 'ÈúÄË¶ÅË∑üËøõ'
                    },
                    locations: {
                        office: 'ÂäûÂÖ¨ÂÆ§',
                        clientSite: 'ÂÆ¢Êà∑Áé∞Âú∫',
                        supplierLocation: '‰æõÂ∫îÂïÜÂú∞ÁÇπ',
                        remote: 'ËøúÁ®ã',
                        travel: 'Âá∫Â∑Æ‰∏≠'
                    },
                    noActivitiesLogged: 'ÂΩìÊó•Êó†Ê¥ªÂä®ËÆ∞ÂΩï'
                },
                
                // ÂëòÂ∑•ÂíåÂõ¢Èòü
                staff: {
                    title: 'ÂëòÂ∑•ÁÆ°ÁêÜ',
                    staffCosts: 'ÂëòÂ∑•Áîü‰∫ßÂäõ‰∏éÊàêÊú¨ÂàÜÊûê',
                    teamPerformance: 'Âõ¢ÈòüÁª©ÊïàÊÄªÁªì',
                    totalStaff: 'ÂëòÂ∑•ÊÄªÊï∞',
                    totalHours: 'ÊÄªËÆ∞ÂΩïÂ∞èÊó∂Êï∞',
                    totalCost: 'ÊÄªÊàêÊú¨',
                    avgProductivity: 'Âπ≥ÂùáÁîü‰∫ßÂäõ',
                    productivity: 'Áîü‰∫ßÂäõ',
                    tasks: '‰ªªÂä°',
                    productiveHours: 'Áîü‰∫ßÂ∞èÊó∂',
                    adminHours: 'Ë°åÊîøÂ∞èÊó∂',
                    cost: 'ÊàêÊú¨',
                    revenue: 'Êî∂ÂÖ•',
                    recentTasks: 'ÊúÄËøë‰ªªÂä°',
                    viewAllTasks: 'Êü•ÁúãÂÖ®ÈÉ®',
                    messageStaff: 'ÂèëÊ∂àÊÅØ',
                    noTasksLogged: 'Êú¨ÊúàÊó†‰ªªÂä°ËÆ∞ÂΩï',
                    role: 'ËÅå‰Ωç',
                    office: 'ÂäûÂÖ¨ÂÆ§',
                    email: 'ÈÇÆÁÆ±',
                    phone: 'ÁîµËØù',
                    wechatId: 'ÂæÆ‰ø°Âè∑',
                    sendMessage: 'ÂèëÈÄÅÊ∂àÊÅØ'
                },
                
                // Ë¥¢Âä°
                finance: {
                    title: 'Ë¥¢Âä°',
                    financialAccounts: 'Ë¥¢Âä°Ë¥¶Êà∑',
                    recordPayment: 'ËÆ∞ÂΩï‰ªòÊ¨æ',
                    transactions: '‰∫§ÊòìËÆ∞ÂΩï',
                    customers: 'ÂÆ¢Êà∑ÂèëÁ•®',
                    suppliers: '‰æõÂ∫îÂïÜ‰ªòÊ¨æ',
                    balance: '‰ΩôÈ¢ù',
                    income: 'Êî∂ÂÖ•',
                    expenses: 'ÊîØÂá∫',
                    profit: 'Âà©Ê∂¶',
                    currency: 'Ë¥ßÂ∏Å',
                    amount: 'ÈáëÈ¢ù',
                    date: 'Êó•Êúü',
                    description: 'ÊèèËø∞',
                    account: 'Ë¥¶Êà∑',
                    status: 'Áä∂ÊÄÅ',
                    paid: 'Â∑≤‰ªòÊ¨æ',
                    pending: 'ÂæÖÂ§ÑÁêÜ',
                    overdue: 'ÈÄæÊúü',
                    paymentHistory: '‰ªòÊ¨æÂéÜÂè≤',
                    accountLedger: 'Ë¥¶Êà∑ÂàÜÁ±ªË¥¶',
                    totalBalance: 'ÊÄª‰ΩôÈ¢ù',
                    bankAccounts: 'Èì∂Ë°åË¥¶Êà∑',
                    officeFinancials: 'ÂäûÂÖ¨ÂÆ§Ë¥¢Âä°',
                    companyCosts: 'ÂÖ¨Âè∏Ë¥πÁî®',
                    staffCosts: 'ÂëòÂ∑•ÊàêÊú¨',
                    salesCommissions: 'ÈîÄÂîÆ‰Ω£Èáë'
                },
                
                // ËÆ¢Âçï
                orders: {
                    title: 'ËÆ¢ÂçïÁÆ°ÁêÜ',
                    allOrders: 'ÂÖ®ÈÉ®ËÆ¢Âçï',
                    activeOrders: 'Ê¥ªÂä®ËÆ¢Âçï',
                    completedOrders: 'Â∑≤ÂÆåÊàêËÆ¢Âçï',
                    pendingOrders: 'ÂæÖÂ§ÑÁêÜËÆ¢Âçï',
                    orderNumber: 'ËÆ¢ÂçïÂè∑',
                    customer: 'ÂÆ¢Êà∑',
                    supplier: '‰æõÂ∫îÂïÜ',
                    product: '‰∫ßÂìÅ',
                    quantity: 'Êï∞Èáè',
                    price: '‰ª∑Ê†º',
                    totalAmount: 'ÊÄªÈáëÈ¢ù',
                    orderDate: 'ËÆ¢ÂçïÊó•Êúü',
                    deliveryDate: '‰∫§‰ªòÊó•Êúü',
                    orderStatus: 'ËÆ¢ÂçïÁä∂ÊÄÅ',
                    paymentStatus: '‰ªòÊ¨æÁä∂ÊÄÅ',
                    shippingStatus: 'ÂèëË¥ßÁä∂ÊÄÅ',
                    trackingNumber: 'ËøΩË∏™Âè∑',
                    notes: 'Â§áÊ≥®',
                    addOrder: 'Ê∑ªÂä†ËÆ¢Âçï',
                    editOrder: 'ÁºñËæëËÆ¢Âçï',
                    viewOrder: 'Êü•ÁúãËÆ¢Âçï',
                    workflow: 'Â∑•‰ΩúÊµÅ',
                    step: 'Ê≠•È™§'
                },
                
                // È°πÁõÆ
                projects: {
                    title: 'È°πÁõÆ',
                    allProjects: 'ÂÖ®ÈÉ®È°πÁõÆ',
                    activeProjects: 'Ê¥ªÂä®È°πÁõÆ',
                    completedProjects: 'Â∑≤ÂÆåÊàêÈ°πÁõÆ',
                    projectName: 'È°πÁõÆÂêçÁß∞',
                    projectManager: 'È°πÁõÆÁªèÁêÜ',
                    startDate: 'ÂºÄÂßãÊó•Êúü',
                    endDate: 'ÁªìÊùüÊó•Êúü',
                    deadline: 'Êà™Ê≠¢Êó•Êúü',
                    progress: 'ËøõÂ∫¶',
                    budget: 'È¢ÑÁÆó',
                    team: 'Âõ¢Èòü',
                    addProject: 'Ê∑ªÂä†È°πÁõÆ',
                    editProject: 'ÁºñËæëÈ°πÁõÆ',
                    viewProject: 'Êü•ÁúãÈ°πÁõÆ'
                },
                
                // ÈÄöÁî®Ë°®Âçï
                form: {
                    required: 'ÂøÖÂ°´',
                    optional: 'ÂèØÈÄâ',
                    selectOption: 'ÈÄâÊã©ÈÄâÈ°π',
                    enterValue: 'ËæìÂÖ•ÂÄº',
                    chooseDate: 'ÈÄâÊã©Êó•Êúü',
                    chooseFile: 'ÈÄâÊã©Êñá‰ª∂',
                    uploadFile: '‰∏ä‰º†Êñá‰ª∂',
                    dragDrop: 'ÊãñÊîæÊàñÁÇπÂáª‰∏ä‰º†',
                    invalidInput: 'ËæìÂÖ•Êó†Êïà',
                    fieldRequired: 'Ê≠§Â≠óÊÆµ‰∏∫ÂøÖÂ°´È°π',
                    saveChanges: '‰øùÂ≠òÊõ¥Êîπ',
                    discardChanges: 'ÊîæÂºÉÊõ¥Êîπ',
                    confirmDelete: 'ÊÇ®Á°ÆÂÆöË¶ÅÂà†Èô§ÂêóÔºü',
                    confirmAction: 'ÊÇ®Á°ÆÂÆöË¶ÅÁªßÁª≠ÂêóÔºü'
                },
                
                // Êó∂Èó¥ÂíåÊó•Êúü
                time: {
                    today: '‰ªäÂ§©',
                    yesterday: 'Êò®Â§©',
                    tomorrow: 'ÊòéÂ§©',
                    thisWeek: 'Êú¨Âë®',
                    thisMonth: 'Êú¨Êúà',
                    lastMonth: '‰∏äÊúà',
                    selectDate: 'ÈÄâÊã©Êó•Êúü',
                    justNow: 'ÂàöÂàö',
                    minutesAgo: 'ÂàÜÈíüÂâç',
                    hoursAgo: 'Â∞èÊó∂Ââç',
                    daysAgo: 'Â§©Ââç',
                    weeksAgo: 'Âë®Ââç',
                    monthsAgo: 'ÊúàÂâç'
                }
            }
        };
        
        this.init();
    }
    
    init() {
        this.addLanguageToggle();
        this.translatePage();
    }
    
    addLanguageToggle() {
        // Add language toggle button to all pages
        const nav = document.querySelector('nav');
        if (!nav) return;
        
        const toggleContainer = document.createElement('div');
        toggleContainer.className = 'language-toggle';
        toggleContainer.style.cssText = 'display: flex; align-items: center; gap: 8px;';
        
        toggleContainer.innerHTML = `
            <button id="langToggle" class="px-3 py-1 rounded-lg text-sm font-medium transition-colors ${
                this.currentLanguage === 'en' 
                    ? 'bg-blue-600 text-white' 
                    : 'bg-gray-200 text-gray-700 hover:bg-gray-300'
            }">
                ${this.currentLanguage === 'en' ? 'EN' : '‰∏≠Êñá'}
            </button>
        `;
        
        // Find appropriate place in nav
        const navContainer = nav.querySelector('.flex.items-center.gap-3, .flex.items-center.space-x-4');
        if (navContainer) {
            navContainer.appendChild(toggleContainer);
        }
        
        // Add click handler
        document.getElementById('langToggle').addEventListener('click', () => {
            this.toggleLanguage();
        });
    }
    
    toggleLanguage() {
        this.currentLanguage = this.currentLanguage === 'en' ? 'zh' : 'en';
        localStorage.setItem('language', this.currentLanguage);
        
        // Update button (old style - for messaging.html)
        const button = document.getElementById('langToggle');
        if (button) {
            button.textContent = this.currentLanguage === 'en' ? 'EN' : '‰∏≠Êñá';
            button.className = `px-3 py-1 rounded-lg text-sm font-medium transition-colors ${
                this.currentLanguage === 'en' 
                    ? 'bg-blue-600 text-white' 
                    : 'bg-gray-200 text-gray-700 hover:bg-gray-300'
            }`;
        }
        
        // Update language label (new style - for index.html)
        const label = document.getElementById('languageLabel');
        if (label) {
            label.textContent = this.currentLanguage === 'en' ? '‰∏≠Êñá' : 'English';
        }
        
        this.translatePage();
    }
    
    translatePage() {
        // Translate all elements with data-i18n attribute
        document.querySelectorAll('[data-i18n]').forEach(element => {
            const key = element.getAttribute('data-i18n');
            const translation = this.get(key);
            if (translation) {
                if (element.tagName === 'INPUT' || element.tagName === 'TEXTAREA') {
                    element.placeholder = translation;
                } else {
                    element.textContent = translation;
                }
            }
        });
        
        // Translate placeholders
        document.querySelectorAll('[data-i18n-placeholder]').forEach(element => {
            const key = element.getAttribute('data-i18n-placeholder');
            const translation = this.get(key);
            if (translation) {
                element.placeholder = translation;
            }
        });
        
        // Translate titles
        document.querySelectorAll('[data-i18n-title]').forEach(element => {
            const key = element.getAttribute('data-i18n-title');
            const translation = this.get(key);
            if (translation) {
                element.title = translation;
            }
        });
    }
    
    get(key) {
        const keys = key.split('.');
        let value = this.translations[this.currentLanguage];
        
        for (const k of keys) {
            if (value && typeof value === 'object') {
                value = value[k];
            } else {
                return key; // Return key if translation not found
            }
        }
        
        return value || key;
    }
    
    t(key) {
        return this.get(key);
    }
}

// Initialize on page load
let i18n;
document.addEventListener('DOMContentLoaded', () => {
    i18n = new I18nSystem();
    window.i18n = i18n; // Make globally available
});
