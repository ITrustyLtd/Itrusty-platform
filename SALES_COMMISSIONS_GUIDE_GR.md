# 📊 Οδηγός Συστήματος Προμηθειών Πωλητών

**Σύστημα**: Sales Commissions System  
**Εταιρεία**: I Trusty Ltd / Yiwu Safe Trade  
**Ημερομηνία Δημιουργίας**: Οκτώβριος 2025

---

## 🎯 Τι Κάνει το Σύστημα

Το σύστημα προμηθειών πωλητών **υπολογίζει αυτόματα**:

1. **Καθαρό Κόστος Προμηθευτή** (με μέθοδο αποφορολόγησης)
2. **Κέρδος Εταιρείας** (από τη διαφορά τιμής)
3. **Προμήθεια Πωλητή** (επί του καθαρού κόστους προμηθευτή)
4. **Καθαρό Κέρδος Εταιρείας** (μετά την προμήθεια πωλητή)

---

## 🧮 Μέθοδος Υπολογισμού (Αποφορολόγηση)

### Παράδειγμα:
- **Αξία Προϊόντων**: €10,000
- **Ποσοστό Κέρδους Εταιρείας**: 10%
- **Ποσοστό Προμήθειας Πωλητή**: 2.5%

### Βήμα 1: Καθαρό Κόστος Προμηθευτή
```
Καθαρό Κόστος = Αξία Προϊόντων ÷ (1 + Κέρδος% / 100)
Καθαρό Κόστος = 10,000 ÷ (1 + 10/100)
Καθαρό Κόστος = 10,000 ÷ 1.10
Καθαρό Κόστος = €9,090.91
```

### Βήμα 2: Κέρδος Εταιρείας
```
Κέρδος Εταιρείας = Αξία Προϊόντων - Καθαρό Κόστος
Κέρδος Εταιρείας = 10,000 - 9,090.91
Κέρδος Εταιρείας = €909.09
```

### Βήμα 3: Προμήθεια Πωλητή
```
Προμήθεια = Καθαρό Κόστος × (Προμήθεια% / 100)
Προμήθεια = 9,090.91 × (2.5 / 100)
Προμήθεια = 9,090.91 × 0.025
Προμήθεια = €227.27
```

### Βήμα 4: Καθαρό Κέρδος Εταιρείας
```
Καθαρό Κέρδος = Κέρδος Εταιρείας - Προμήθεια Πωλητή
Καθαρό Κέρδος = 909.09 - 227.27
Καθαρό Κέρδος = €681.82
```

---

## 📍 Πρόσβαση στο Σύστημα

1. **Από το Dashboard**: Πατήστε το κουμπί **"Sales Commissions"** (πορτοκαλί/χρυσό)
2. **Direct URL**: `sales-commissions.html`

---

## 👥 Πωλητές (Salespersons)

### Προφορτωμένοι Πωλητές (4 άτομα):

| Όνομα | Θέση | Προεπιλεγμένη Προμήθεια | Κατάσταση |
|-------|------|------------------------|-----------|
| **Lily** | Shenzhen Office Manager | 2.5% | Active |
| **Ruby** | Procurement Specialist | 3.0% | Active |
| **Nikos** | Greece Office - Customer Communication | 2.5% | Active |
| **External Partner A** | US Market | 3.5% | Active |

### Προσθήκη Νέου Πωλητή:

1. Πατήστε το πράσινο κουμπί **"+"** δίπλα στο dropdown πωλητών
2. Συμπληρώστε:
   - **Ονοματεπώνυμο** (υποχρεωτικό)
   - **Email** (προαιρετικό)
   - **Τηλέφωνο** (προαιρετικό)
   - **Προεπιλεγμένη Προμήθεια %** (π.χ. 2.5)
3. Πατήστε **"Αποθήκευση"**
4. Ο νέος πωλητής προστίθεται αυτόματα στη λίστα

---

## ➕ Νέα Εγγραφή Προμήθειας

### Βήμα προς Βήμα:

1. **Πατήστε**: Το πορτοκαλί κουμπί **"Νέα Εγγραφή Προμήθειας"** (πάνω δεξιά)

2. **Συμπληρώστε τα Στοιχεία Παραγγελίας**:
   - **Ημερομηνία Τιμολογίου** (υποχρεωτικό)
   - **Αριθμός Τιμολογίου** (υποχρεωτικό, π.χ. INV-2025-001)
   - **Αριθμός Παραγγελίας** (προαιρετικό, π.χ. ORD-2025-001)
   - **Πωλητής** (υποχρεωτικό, επιλέξτε από dropdown)
   - **Κατάσταση** (Pending / Paid to Salesperson / Completed)

3. **Συμπληρώστε τα Οικονομικά Στοιχεία**:
   - **Συνολικό Ποσό Παραγγελίας** (€) - Η συνολική αξία της παραγγελίας
   - **Αξία Προϊόντων (Μόνο)** (€) - Το κόστος των προϊόντων χωρίς έξοδα
   - **Ποσοστό Κέρδους Εταιρείας** (%) - Συνήθως 10%
   - **Ποσοστό Προμήθειας Πωλητή** (%) - Συνήθως 2.5-3.5%

4. **Αυτόματοι Υπολογισμοί** (Real-time):
   - Καθαρό Κόστος Προμηθευτή
   - Κέρδος Εταιρείας
   - Προμήθεια Πωλητή
   - Καθαρό Κέρδος Εταιρείας

5. **Σημειώσεις** (προαιρετικό): Πρόσθετες πληροφορίες για την παραγγελία

6. **Αποθήκευση**: Πατήστε το πορτοκαλί κουμπί **"Αποθήκευση"**

---

## 🔍 Φίλτρα & Αναζήτηση

### Διαθέσιμα Φίλτρα:

1. **Πωλητής**: Επιλέξτε συγκεκριμένο πωλητή ή "Όλοι οι Πωλητές"
2. **Κατάσταση**: Pending / Paid to Salesperson / Completed
3. **Από Ημερομηνία**: Φιλτράρισμα από συγκεκριμένη ημερομηνία
4. **Έως Ημερομηνία**: Φιλτράρισμα έως συγκεκριμένη ημερομηνία
5. **Αριθμός Τιμολογίου**: Αναζήτηση με αριθμό τιμολογίου

### Reset Φίλτρων:
Πατήστε το γκρι κουμπί **"Reset"** για να επαναφέρετε όλα τα φίλτρα.

---

## 📊 Dashboard & Αναλύσεις

### Summary Cards (5 κάρτες στην κορυφή):

1. **Σύνολο Παραγγελιών**: Αριθμός εγγραφών (με φίλτρα)
2. **Συνολική Αξία**: Άθροισμα όλων των παραγγελιών (€)
3. **Κέρδος Εταιρείας**: Συνολικό κέρδος πριν τις προμήθειες (€)
4. **Προμήθειες Πωλητών**: Συνολικές προμήθειες (€)
5. **Καθαρό Κέρδος**: Κέρδος μετά τις προμήθειες (€)

### Γραφήματα (2 charts):

#### 1. Προμήθειες ανά Πωλητή (Bar Chart):
- Εμφανίζει το σύνολο προμηθειών κάθε πωλητή
- Χρήσιμο για αξιολόγηση απόδοσης

#### 2. Κατανομή Κερδών (Doughnut Chart):
- Κέρδος Εταιρείας (πράσινο)
- Προμήθειες Πωλητών (μωβ)
- Καθαρό Κέρδος (μπλε)

---

## 📋 Πίνακας Εγγραφών

### Στήλες:

| Στήλη | Περιγραφή |
|-------|-----------|
| **#** | Αριθμός σειράς |
| **Ημερομηνία** | Ημερομηνία τιμολογίου |
| **Αρ. Τιμολογίου** | Αριθμός τιμολογίου (μπλε, clickable) |
| **Αρ. Παραγγελίας** | Αριθμός παραγγελίας |
| **Πωλητής** | Όνομα πωλητή |
| **Συνολική Αξία** | Συνολικό ποσό παραγγελίας |
| **Κόστος Προϊόντων** | Αξία προϊόντων μόνο |
| **Κέρδος %** | Ποσοστό κέρδους εταιρείας |
| **Κέρδος Εταιρείας** | Κέρδος σε € (πράσινο) |
| **Προμήθεια %** | Ποσοστό προμήθειας πωλητή |
| **Προμήθεια €** | Προμήθεια σε € (μωβ) |
| **Καθαρό Κέρδος** | Καθαρό κέρδος σε € (μπλε, bold) |
| **Κατάσταση** | Pending / Paid / Completed |
| **Ενέργειες** | Edit (μπλε μολύβι) / Delete (κόκκινος κάδος) |

---

## ✏️ Επεξεργασία Εγγραφής

### Δύο Τρόποι:

1. **Από τον Πίνακα**: Πατήστε την ολόκληρη γραμμή
2. **Από το Κουμπί**: Πατήστε το μπλε εικονίδιο μολύβι

### Στο Modal Επεξεργασίας:

- Όλα τα πεδία προσυμπληρωμένα με τα τρέχοντα δεδομένα
- Αλλάξτε οποιοδήποτε πεδίο
- Οι υπολογισμοί ενημερώνονται αυτόματα (real-time)
- Πατήστε **"Αποθήκευση"** για να αποθηκεύσετε τις αλλαγές
- Πατήστε το κόκκινο **"Διαγραφή"** για να διαγράψετε την εγγραφή

---

## 🗑️ Διαγραφή Εγγραφής

### Δύο Τρόποι:

1. **Από τον Πίνακα**: Πατήστε το κόκκινο εικονίδιο κάδου
2. **Από το Modal Επεξεργασίας**: Πατήστε το κόκκινο κουμπί "Διαγραφή" (κάτω αριστερά)

**Ασφάλεια**: Πάντα ζητάει επιβεβαίωση πριν τη διαγραφή.

---

## 📥 Export to Excel

1. **Εφαρμόστε φίλτρα** (πωλητής, ημερομηνίες, κατάσταση)
2. **Πατήστε το πράσινο κουμπί** "Export to Excel" (πάνω δεξιά)
3. **Κατεβάζει CSV αρχείο** με όλες τις φιλτραρισμένες εγγραφές
4. **Ανοίξτε στο Excel/Google Sheets** για περαιτέρω ανάλυση

**Περιλαμβάνει**:
- Ημερομηνία
- Αριθμός Τιμολογίου
- Αριθμός Παραγγελίας
- Πωλητής
- Συνολική Αξία
- Κόστος Προϊόντων
- Ποσοστό Κέρδους
- Κέρδος Εταιρείας
- Ποσοστό Προμήθειας
- Προμήθεια €
- Καθαρό Κέρδος
- Κατάσταση

---

## 📊 Παραδείγματα Χρήσης

### Παράδειγμα 1: Παραγγελία με 10% κέρδος και 2.5% προμήθεια

**Δεδομένα**:
- Συνολική Αξία: €15,000
- Αξία Προϊόντων: €12,000
- Κέρδος Εταιρείας: 10%
- Προμήθεια Πωλητή: 2.5%
- Πωλητής: Lily

**Αποτελέσματα**:
- Καθαρό Κόστος Προμηθευτή: €10,909.09
- Κέρδος Εταιρείας: €1,090.91
- Προμήθεια Lily: €272.73
- Καθαρό Κέρδος Εταιρείας: €818.18

---

### Παράδειγμα 2: Μεγάλη παραγγελία με υψηλή προμήθεια

**Δεδομένα**:
- Συνολική Αξία: €50,000
- Αξία Προϊόντων: €45,000
- Κέρδος Εταιρείας: 12%
- Προμήθεια Πωλητή: 3.5% (External Partner)
- Πωλητής: External Partner A

**Αποτελέσματα**:
- Καθαρό Κόστος Προμηθευτή: €40,178.57
- Κέρδος Εταιρείας: €4,821.43
- Προμήθεια External Partner: €1,406.25
- Καθαρό Κέρδος Εταιρείας: €3,415.18

---

## 📈 Αναλύσεις ανά Πωλητή

### Πως να δείτε τα αποτελέσματα ενός πωλητή:

1. **Φιλτράρετε**: Επιλέξτε τον πωλητή από το dropdown "Πωλητής"
2. **Ορίστε περίοδο**: "Από Ημερομηνία" και "Έως Ημερομηνία"
3. **Δείτε τα Summary Cards**:
   - Πόσες παραγγελίες έφερε
   - Συνολική αξία παραγγελιών
   - Συνολικές προμήθειες που κέρδισε
   - Κέρδος εταιρείας από τις παραγγελίες του
4. **Δείτε τον πίνακα** με όλες τις λεπτομέρειες
5. **Export to Excel** για αναφορές

---

## 🎨 Χρωματική Κωδικοποίηση

### Καταστάσεις:

| Κατάσταση | Χρώμα | Σημασία |
|-----------|-------|---------|
| **Pending** | Κίτρινο | Αναμονή πληρωμής |
| **Paid to Salesperson** | Μπλε | Πληρώθηκε ο πωλητής |
| **Completed** | Πράσινο | Ολοκληρώθηκε |

### Οικονομικά:

| Στοιχείο | Χρώμα | Σημασία |
|----------|-------|---------|
| **Κέρδος Εταιρείας** | Πράσινο | Θετικό για εταιρεία |
| **Προμήθεια Πωλητή** | Μωβ | Κόστος για εταιρεία |
| **Καθαρό Κέρδος** | Μπλε | Τελικό κέρδος |

---

## 🗄️ Database Tables

### 1. salespersons (Πωλητές)
- `id`: Μοναδικός αριθμός
- `name`: Ονοματεπώνυμο
- `email`: Email
- `phone`: Τηλέφωνο
- `default_commission_rate`: Προεπιλεγμένη προμήθεια %
- `status`: Active / Inactive
- `notes`: Σημειώσεις

### 2. sales_commissions (Προμήθειες)
- `id`: Μοναδικός αριθμός
- `invoice_date`: Ημερομηνία τιμολογίου
- `invoice_number`: Αριθμός τιμολογίου
- `order_number`: Αριθμός παραγγελίας
- `salesperson_id`: ID πωλητή
- `salesperson_name`: Όνομα πωλητή
- `total_order_amount`: Συνολική αξία
- `product_cost_amount`: Κόστος προϊόντων
- `company_profit_percentage`: Ποσοστό κέρδους
- `company_profit_amount`: Κέρδος εταιρείας €
- `net_supplier_cost`: Καθαρό κόστος προμηθευτή
- `salesperson_commission_percentage`: Ποσοστό προμήθειας
- `salesperson_commission_amount`: Προμήθεια πωλητή €
- `company_net_profit`: Καθαρό κέρδος εταιρείας €
- `status`: Κατάσταση
- `notes`: Σημειώσεις

---

## 💡 Best Practices

### Για Ακριβή Υπολογισμούς:

1. **Αξία Προϊόντων**: Χρησιμοποιήστε την τιμή που πληρώνετε στον προμηθευτή (χωρίς τα δικά σας έξοδα)
2. **Ποσοστό Κέρδους**: Συνήθως 10-15% για B2B, 20-30% για B2C
3. **Ποσοστό Προμήθειας**: Συνήθως 2.5-3.5% για εσωτερικούς πωλητές, 3.5-5% για εξωτερικούς partners

### Για Καλύτερη Οργάνωση:

1. **Ημερομηνία**: Χρησιμοποιήστε την ημερομηνία έκδοσης τιμολογίου
2. **Αριθμοί**: Χρησιμοποιήστε συνεπή μορφή (π.χ. INV-2025-001, ORD-2025-001)
3. **Κατάσταση**: Ενημερώνετε την κατάσταση όταν πληρώνετε τον πωλητή
4. **Σημειώσεις**: Προσθέστε σημειώσεις για ιδιαίτερες περιπτώσεις

---

## 🔗 Ενσωμάτωση με Άλλα Συστήματα

Το Sales Commissions System συνδέεται με:

1. **Orders System** (`orders-enhanced.html`):
   - Αντιγράψτε τον αριθμό παραγγελίας στο πεδίο "Αριθμός Παραγγελίας"

2. **Customers System** (`customers.html`):
   - Οι πωλητές είναι συχνά συνδεδεμένοι με συγκεκριμένους πελάτες

3. **Company Expenses** (`company-expenses.html`):
   - Οι προμήθειες πωλητών είναι έξοδο της εταιρείας

4. **Profit Analysis** (`profit-analysis.html`):
   - Το καθαρό κέρδος εταιρείας ενσωματώνεται στην ανάλυση κερδών

---

## 📞 Troubleshooting

### Πρόβλημα: Οι υπολογισμοί φαίνονται λάθος
**Λύση**: 
- Ελέγξτε ότι η "Αξία Προϊόντων" είναι το καθαρό κόστος προμηθευτή (χωρίς το δικό σας κέρδος)
- Ελέγξτε ότι τα ποσοστά είναι σωστά (π.χ. 10 για 10%, όχι 0.10)

### Πρόβλημα: Δεν βλέπω κάποιον πωλητή στη λίστα
**Λύση**:
- Πατήστε το πράσινο κουμπί "+" για να προσθέσετε νέο πωλητή
- Ελέγξτε ότι ο πωλητής είναι "Active" στο status

### Πρόβλημα: Τα γραφήματα είναι άδεια
**Λύση**:
- Προσθέστε τουλάχιστον μία εγγραφή προμήθειας
- Ελέγξτε τα φίλτρα - μπορεί να φιλτράρονται όλες οι εγγραφές

---

## ✅ Checklist Δημιουργίας Εγγραφής

Πριν αποθηκεύσετε μία εγγραφή, ελέγξτε:

- [ ] Ημερομηνία Τιμολογίου συμπληρωμένη
- [ ] Αριθμός Τιμολογίου μοναδικός και σωστός
- [ ] Πωλητής επιλεγμένος
- [ ] Συνολικό Ποσό Παραγγελίας > 0
- [ ] Αξία Προϊόντων > 0
- [ ] Ποσοστό Κέρδους λογικό (10-30%)
- [ ] Ποσοστό Προμήθειας λογικό (2.5-5%)
- [ ] Καθαρό Κέρδος Εταιρείας > 0 (αν όχι, ελέγξτε τα ποσοστά)
- [ ] Κατάσταση σωστή
- [ ] Σημειώσεις προστέθηκαν (αν χρειάζεται)

---

## 🎯 Κύρια Χαρακτηριστικά

✅ **Αυτόματοι Υπολογισμοί** με μέθοδο αποφορολόγησης  
✅ **Real-time Updates** - Οι υπολογισμοί γίνονται αμέσως  
✅ **Διαχείριση Πωλητών** - Προσθήκη/επεξεργασία πωλητών  
✅ **Προεπιλεγμένες Προμήθειες** - Κάθε πωλητής έχει default commission rate  
✅ **Φίλτρα & Αναλύσεις** - Περίοδος, πωλητής, κατάσταση  
✅ **Γραφήματα** - Bar chart & Doughnut chart  
✅ **Export to Excel** - CSV export για αναφορές  
✅ **Full CRUD** - Create, Read, Update, Delete  
✅ **Κατάσταση Πληρωμών** - Track payment status  
✅ **Responsive Design** - Λειτουργεί σε desktop & mobile  

---

**Κατάσταση**: ✅ **Πλήρως Λειτουργικό**  
**Έκδοση**: 1.0  
**Τελευταία Ενημέρωση**: Οκτώβριος 2025

---

**Καλή χρήση!** 🚀
